/*! Excelsior Web Framework v0.1.2 | (c) 2013 NYS ITS | https://github.com/nys-its/excelsior.git | License (MIT): https://github.com/nys-its/excelsior/blob/master/license.md */

var EWF={ua:navigator.userAgent,iOS:!1,$body:null,$html:null,$window:null,projectRoot:"excelsior/",imagePath:"excelsior/images/"};EWF.init=function(){var screenMax;EWF.$body=$("body"),EWF.$html=$("html"),EWF.$window=$(window),screenMax=Math.max(screen.width,screen.height),480>=screenMax?EWF.$html.addClass("screen-max-mini"):screenMax>480&&768>screenMax?EWF.$html.addClass("screen-max-medium"):screenMax>=768&&EWF.$html.addClass("screen-max-large"),EWF.fixImagePath(),EWF.preloader.add('<img src="'+EWF.imagePath+'close.svg" alt="">'),EWF.preloader.add('<img src="'+EWF.imagePath+'close-x-gray.svg" alt="">'),EWF.preloader.add('<img src="'+EWF.imagePath+'hamburger-no-dots.svg" alt="">'),EWF.preloader.add('<img src="'+EWF.imagePath+'nys-small.png" alt="">'),EWF.preloader.add('<img src="'+EWF.imagePath+'nys-banner-img.png" alt="">'),EWF.preloader.init()},$(document).ready(function(){EWF.init()}),EWF.fixImagePath=function(){var slashRegex,index,numSubDirectories,i,currentUrl=document.location.pathname;if(0>currentUrl)return!1;if(index=currentUrl.indexOf(EWF.projectRoot),currentUrl=currentUrl.substr(index),slashRegex=/\//g,slashRegex.test(currentUrl))for(numSubDirectories=currentUrl.match(slashRegex).length-1,i=0;numSubDirectories>i;i++)EWF.imagePath="../"+EWF.imagePath},function(){Modernizr.touch&&function(){FastClick.attach(document.body)}(),/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(EWF.ua)&&EWF.ua.indexOf("AppleWebKit")>-1&&(EWF.iOS=!0,function(w){function restoreZoom(){meta.setAttribute("content",enabledZoom),enabled=!0}function disableZoom(){meta.setAttribute("content",disabledZoom),enabled=!1}function checkTilt(e){aig=e.accelerationIncludingGravity,x=Math.abs(aig.x),y=Math.abs(aig.y),z=Math.abs(aig.z),w.orientation&&180!==w.orientation||!(x>7||(z>6&&8>y||8>z&&y>6)&&x>5)?enabled||restoreZoom():enabled&&disableZoom()}var doc=w.document;if(doc.querySelector){var x,y,z,aig,meta=doc.querySelector("meta[name=viewport]"),initialContent=meta&&meta.getAttribute("content"),disabledZoom=initialContent+",maximum-scale=1",enabledZoom=initialContent+",maximum-scale=10",enabled=!0;meta&&(w.addEventListener("orientation change",restoreZoom,!1),w.addEventListener("devicemotion",checkTilt,!1))}}(window))}(),$(document).ready(function(){EWF.$body||(EWF.$body=$("body")),$("#gov-link-3").on("click",function(e){e.preventDefault(),EWF.$body.addClass("active-gov-bar-search")}),$("[data-active]").on("click",function(e){function removeOtherActive(active){var activeClass=active.attr("data-active");EWF.$body.removeClass(activeClass),active.removeClass("active")}function specialEvents(activeElm){"active-site-search"===activeElm&&$("#site-search-box").focus(),"active-site-menu"===activeElm&&(EWF.$body.hasClass("off-canvas")&&EWF.$body.hasClass("active-site-menu")?EWF.$body.css("min-height",screen.height+"px"):EWF.$body.css("min-height",""))}e.preventDefault(),e.stopPropagation();var $clickedElm=$(this),activeClass=$clickedElm.attr("data-active"),$activeElm=$(".active"),selectedClass="active";console.log($activeElm.length),$activeElm.length>0&&(console.log("active-element-exists"),$activeElm.attr("data-active")!==$clickedElm.attr("data-active")&&removeOtherActive($activeElm)),EWF.$body.hasClass(activeClass)?(EWF.$body.removeClass(activeClass),$clickedElm.removeClass(selectedClass),EWF.$body.hasClass("active-sub-menu")&&EWF.$body.removeClass("active-sub-menu"),EWF.$body.off("click")):(EWF.$body.addClass(activeClass),$clickedElm.addClass(selectedClass),EWF.$body.on("click",function(e){var activeElm=$(".active");if($(this),activeElm.length>0&&"INPUT"!==e.target.tagName){var activeClass=activeElm.attr("data-active");EWF.$body.removeClass(activeClass),activeElm.removeClass("active"),EWF.$body.off("click")}}),specialEvents(activeClass))})}),EWF.preloader={container:null,assets:[]},EWF.preloader.init=function(){EWF.preloader.container=document.createElement("div"),EWF.preloader.container.className="hide-off-screen",document.body.appendChild(EWF.preloader.container),$.each(EWF.preloader.assets,function(i,asset){EWF.preloader.add(asset)}),EWF.preloader.assets=[]},EWF.preloader.add=function(html){return html&&"string"==typeof html?(EWF.preloader.container?EWF.preloader.container.innerHTML+=html:EWF.preloader.assets.push(html),void 0):!1};try{$.fn.reverse=[].reverse}catch(e){}